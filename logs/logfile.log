[2023-08-19 22:01:40:101 INFO]: Index already exists
[2023-08-19 22:01:40:123 DEBUG]: message='Request to OpenAI API' method=post path=https://api.openai.com/v1/chat/completions
[2023-08-19 22:01:40:123 DEBUG]: api_version=None data='{"messages": [{"role": "system", "content": "You are a world class algorithm for extracting information in structured formats."}, {"role": "user", "content": "Use the given format to extract information from the following input:"}, {"role": "user", "content": "Maroon kurta with rating greater than 4 and price less than 400 and ordered by price in descending order"}, {"role": "user", "content": "Tips: Make sure to answer in the correct format"}], "model": "gpt-3.5-turbo-0613", "max_tokens": null, "stream": false, "n": 1, "temperature": 0.0, "functions": [{"name": "output_formatter", "description": "Output formatter. Should always be used to format your response to the user.", "parameters": {"title": "SearchEngineArgs", "description": "Identify the arguments for the search engine", "type": "object", "properties": {"name": {"title": "name", "description": "Name of the product", "type": "string"}, "order_by": {"title": "order_by", "description": "Order the results by", "type": "string", "enum": ["similarity", "current_price"]}, "is_descending": {"title": "is_descending", "description": "Order in descending order or not", "type": "boolean"}, "rating_filter": {"title": "rating_filter", "description": "Filter by rating", "type": "integer", "minimum": 1, "maximum": 5}, "popularity_filter": {"title": "popularity_filter", "description": "Filter by popularity", "type": "number", "minimum": 0, "maximum": 1}, "price_filter": {"title": "price_filter", "description": "Filter by price range (min_price, max_price)", "type": "array", "items": {"type": "number"}}}, "required": []}}], "function_call": {"name": "output_formatter"}}' message='Post details'
[2023-08-19 22:01:40:124 DEBUG]: Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
[2023-08-19 22:01:40:140 DEBUG]: Starting new HTTPS connection (1): api.openai.com:443
[2023-08-19 22:01:44:180 DEBUG]: https://api.openai.com:443 "POST /v1/chat/completions HTTP/1.1" 200 None
[2023-08-19 22:01:44:183 DEBUG]: message='OpenAI API response' path=https://api.openai.com/v1/chat/completions processing_ms=3307 request_id=b20b731607d23f8347d7b8ead070133c response_code=200
[2023-08-19 22:01:44:189 DEBUG]: Searching in vectorstore
[2023-08-19 22:01:44:354 DEBUG]: message='Request to OpenAI API' method=post path=https://api.openai.com/v1/embeddings
[2023-08-19 22:01:44:354 DEBUG]: api_version=None data='{"input": [[12331, 9186, 28364, 2629]], "model": "text-embedding-ada-002", "encoding_format": "base64"}' message='Post details'
[2023-08-19 22:01:44:918 DEBUG]: https://api.openai.com:443 "POST /v1/embeddings HTTP/1.1" 200 None
[2023-08-19 22:01:44:920 DEBUG]: message='OpenAI API response' path=https://api.openai.com/v1/embeddings processing_ms=44 request_id=1094722e968e2babb06a6009e9cd7748 response_code=200
[2023-08-19 22:01:44:949 DEBUG]: Search in vectorstore complete
[2023-08-19 22:01:44:949 DEBUG]: Search Query: 
SELECT * FROM products WHERE id IN ('42daea70-0e8d-4bb6-90a9-0741c62ac7a9','8a34ca27-ec7c-4106-aee9-051c1bfc9ca0','d224e88c-d035-4163-b389-c4d032a16dc4','02db9ed3-f3a5-4f86-a514-ed7792cd69d9','626e42a5-e959-43a8-8d6d-4154d9e5b609','bdd5db2e-fe8e-4f57-a5f9-a95226598f57','46ec00f8-a89c-42ea-becb-56896058e8aa','f36954a4-7b5d-4491-af4e-4487e7c00762','cca7218b-4077-47f7-8507-35211a9b2877','54d2c8ad-52f2-4582-83e0-cae3b33add2a','c3bf4aac-f3a9-4538-946e-25f20f3a3bfc','6e975c49-6e2c-44de-9d52-a0b9de43f222','862c0fa9-3287-468f-96f9-f9537c4a155f','75a0c786-92d8-4604-bc13-d62cbb4b2b55','7653d0d4-6718-4fc3-80fe-ad0d23aefcde','e7f2d837-7126-44c4-a40f-66f994d43e40','33d9d942-c40c-43c1-a0b3-2e8c3213af41','9975c002-6cd2-4787-a455-a185bfbabca6','056125a1-cdee-49b0-b68a-78d0841468f0','b28001a2-b05b-42ea-b2cd-fa94fc7e96d4','9c7c195b-d979-46aa-98ed-898283b918b0','d15869c1-9411-4d31-8bbb-7381013d5444','3c820e60-46e0-4679-8e68-6c2e400cec70','9069ed53-8f57-4027-ac7f-01a01960657a','d280dbe4-872a-4698-a321-7eba74768e38','9eb38e8c-306f-4c87-b851-b470632b2080','ba704c06-05b4-415e-a487-82297db45b11','06636d17-6751-483c-b04d-ded918fa8ab9','5f8e34c9-83df-4a81-9181-e4ab2432e75e','5524eea8-2f88-4234-86b7-e378009c4494','717d5b15-20a4-45ec-8608-d705e7c3a949','fccd9a62-6a2d-44f1-8346-90ade3736624','854e6b35-3af2-414a-8da2-465eef16f84a','21846530-e3e7-4cf2-b85e-7a3662ad0e75','c9e91b93-ff97-4747-ad03-e7cd1025831f','8a7b186f-4778-4a2f-a471-c94e4648cb50','a918d1fa-d2cc-42a2-9133-321350a25787','3d07be99-1894-426a-9463-2f2e7639ed87','0904d037-c798-4dc2-afb4-6a08d186f096','1e8f72a2-f2f9-40a3-9d09-3a2d7bfe4728','9561af2e-d47f-45ab-8588-7f1453096fdb','17ce75ce-bcaa-4da0-b56b-9ca89b73a24b','e5bab457-ba52-4147-81a1-70d4cf5614c3','3f63bb30-76b9-46c0-89f8-cd0811480053','753acacc-b25c-4cf0-969d-14a9d79b7065','a154991a-41c8-4d70-87bb-0485747f9a31','3c3c7a78-6f09-4d14-9383-a4b87d95484f','692743d4-4ffd-4ea7-95ff-a2927176b043','f23dd57c-453d-4892-b39e-8604bf52cda0','e66df7a7-c47c-4016-8aad-0c62d9106757','0733537f-a453-41da-9e97-070594957372','6c985e82-e387-458d-b99a-4d12a2eb5fef','cbf457ee-8f7b-4937-acc2-28381acb067b','77843eb3-5f46-4b76-af39-234f735cdbfa','94d97971-6a17-4933-9c6a-092150e3907d','55923bbb-b397-494b-bffa-f13cd78a2a06','80ce3e56-1d0f-4aa1-a61c-0bbfb931f5f6','6fae232c-26bf-40f9-a171-cc633a5d90b0','6648879e-1645-4374-820b-f4ce1282c1b7','4e48c182-fad0-44c3-8624-5ad5b8c4e5dc','4fd11f5d-2a3c-4726-a1e4-add8b2ebbd00','dc405e12-0145-48fc-90b5-5c167d0628c0','9310cf07-c89d-497d-b709-d9915b31d375','57424989-3390-485a-b580-554129b969a7','f5c19ff9-9143-494a-bd2a-04b882e91b4e','279aa3a5-3543-4a13-972c-244d11aef967','5793c54a-3927-468a-9d0b-ce0ae6867eef','a1921a1d-d6a8-499a-bc48-2a527fde6a3a','92d77124-1906-40b9-8087-b2b4ea8bdbee','9d4a96e4-88a8-4bda-b6d3-8f2f0e1a3e56','3b1dc10f-3063-46db-bbee-3a3fa9b7dc04','286f618c-f41d-46bd-bfca-19c46f77c76d','da7c5ae1-15dc-4b2d-b664-141dee19feee','6775bf24-0040-43e7-b8d2-47c451b546e4','e949a359-63f9-4029-beb7-9a469b4814a3','8fa05125-a159-48a5-bf57-51c1fa58af55','1a7da7c7-1167-426f-9476-91b56cfbdf55','6e368e35-94f3-427d-8d7a-fcf98b617f66','a29faa0c-0529-4114-96dc-d8625108b0bf','46707521-fb61-4db4-949d-ca3231a0fb07','31322b01-0400-468c-bfd0-1a6cad298027','57b8d25c-dd2f-411c-883d-a68531715622','82235469-18e6-44fa-8b83-c3943c3c2ec0','587c4848-5e1a-4d2d-a4f8-3cec5e07e1c4','2d8b8c23-ad27-4e56-9054-b4352207b0da','588f5dd5-40e9-4b3c-aa31-616f990301ed','654850de-2fb7-4df6-8dd5-7046479ac5ae','65c33735-91ad-419a-aa26-56511bcd854d','ef886266-49ae-4c3c-a2ba-300e9e8bc0b4','31c6bceb-acd2-43ac-b18f-3bf274ea606a','e208679e-56c7-4000-a7e0-9c46e22fee78','c34d63cb-25df-4949-a039-bbc9149a3715','96d7d21f-5a51-4498-9418-3038647d5a93','d83b632a-428a-4a8c-97be-0bf21bb13a3f','89bb6b94-a5f2-4c5f-a0f0-0b0154436bed','a0dac10b-e38d-4fd3-befc-99dcc6647c9a','1ca97fa2-eba1-49bd-a684-3895dbae7ee3','d4450ffe-26db-476f-b6bf-4d8e3d6483c8','8d4d2e7a-550c-44f1-84d9-4d559cb8c94e','848a3142-d045-4dfb-ae59-9bf402ebc0a8')
   AND rating >= 4
   AND current_price <= 400 ORDER BY current_price desc LIMIT 10;
